(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[36],{699:function(e,t,a){"use strict";t.a=""},876:function(e,t,a){"use strict";a.r(t);var l=a(194),r=a(184),n=a(185),s=a(187),i=a(186),o=a(0),u=a.n(o),c=a(694),d=a(699),m=(a(695),a(711)),v=a.n(m),p=a(131),h=a(183),E=(new Date).toISOString().substr(0,10),b=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){var e,n;Object(r.a)(this,a);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return(n=t.call.apply(t,[this].concat(i))).state=(e={ticketNo:void 0==n.props.location.res?"":n.props.location.res.ticketNo,startDate:void 0==n.props.location.res?"":n.props.location.res.startDate,startDateValid:!1,startDateInvalid:!1,ticketType:void 0==n.props.location.res?"":n.props.location.res.ticketType,ticketTypeArr:[],ticketTypeValid:!1,ticketTypeInvalid:!1,bu:void 0==n.props.location.res?"":n.props.location.res.BUID,buArr:[],buValid:!1,buInvalid:!1,BUName:""},Object(l.a)(e,"BUName",void 0==n.props.location.res?"":n.props.location.res.BUName),Object(l.a)(e,"engineer",void 0==n.props.location.res?"":n.props.location.res.assignedMember),Object(l.a)(e,"engineerValid",!1),Object(l.a)(e,"engineerInvalid",!1),Object(l.a)(e,"userArr",[]),Object(l.a)(e,"customerName",void 0==n.props.location.res?"":n.props.location.res.customerName),Object(l.a)(e,"customerValid",!1),Object(l.a)(e,"customerInvalid",!1),Object(l.a)(e,"customerAdd",void 0==n.props.location.res?"":n.props.location.res.customerAddress),Object(l.a)(e,"customerAddValid",!1),Object(l.a)(e,"customerAddInvalid",!1),Object(l.a)(e,"customerMob",void 0==n.props.location.res?"":n.props.location.res.customerMNo),Object(l.a)(e,"customerMobValid",!1),Object(l.a)(e,"customerMobInvalid",!1),Object(l.a)(e,"customerEmail",void 0==n.props.location.res?"":n.props.location.res.customerEmail),Object(l.a)(e,"customerEmailInvalid",!1),Object(l.a)(e,"customerEmailValid",!1),Object(l.a)(e,"customerRequest",void 0==n.props.location.res?"":n.props.location.res.customerComplain),Object(l.a)(e,"customerRequestValid",!1),Object(l.a)(e,"customerRequestInvalid",!1),Object(l.a)(e,"validity",void 0==n.props.location.res?"":n.props.location.res.isValid),Object(l.a)(e,"validityValid",!1),Object(l.a)(e,"validityInvalid",!1),Object(l.a)(e,"warrantyStatus",void 0==n.props.location.res?"":n.props.location.res.inWarranty),Object(l.a)(e,"warrantyStatusValid",!1),Object(l.a)(e,"warrantyStatusInvalid",!1),Object(l.a)(e,"statusOfTicket",void 0==n.props.location.ticketStatusExport?"":n.props.location.ticketStatusExport),Object(l.a)(e,"ticketStatus",[]),Object(l.a)(e,"statusOfTicketValid",!1),Object(l.a)(e,"statusOfTicketInvalid",!1),Object(l.a)(e,"sendToBack",0),Object(l.a)(e,"priority",void 0==n.props.location.res?"":n.props.location.res.priority),Object(l.a)(e,"priorityValid",!1),Object(l.a)(e,"priorityInvalid",!1),Object(l.a)(e,"dueDate",void 0==n.props.location.res?"":v()(n.props.location.res.dueDate).format("YYYY-MM-DD")),Object(l.a)(e,"dueDateValid",!1),Object(l.a)(e,"dueDateInvalid",!1),e),n.fetchBu=function(e){fetch(d.a+"/bu/fetch").then((function(e){return e.json()})).then((function(e){null==e&&void 0==e||!Array.isArray(e.data)||n.setState({buArr:e.data})})).catch((function(e){n.setState({buArr:[]})}))},n.fetchUser=function(){fetch(d.a+"/user/fetch?isTeamRep=1").then((function(e){return e.json()})).then((function(e){null==e&&void 0==e||!Array.isArray(e.data)||n.setState({userArr:e.data})})).catch((function(e){return e}))},n.fetchDropDowns=function(){fetch(d.a+"/types/tt").then((function(e){return e.json()})).then((function(e){null==e&&void 0==e||!Array.isArray(e.data)||n.setState({ticketTypeArr:e.data})})).catch((function(e){return e})),fetch(d.a+"/types/ts").then((function(e){return e.json()})).then((function(e){null==e&&void 0==e||!Array.isArray(e.data)||n.setState({ticketStatus:e.data})})).catch((function(e){return e}))},n.handleStartDateChange=function(e){void 0!=e.target.value?n.setState({startDate:e.target.value,startDateValid:!0,startDateInvalid:!1}):n.setState({startDateInvalid:!0,startDateValid:!1})},n.handleQueryChange=function(e){console.log("Query Type -----",e.target.value),""!=e.target.value&&"Please select"!=e.target.value?n.setState({ticketType:e.target.value,ticketTypeValid:!0,ticketTypeInvalid:!1}):n.setState({ticketType:"",ticketTypeInvalid:!0,ticketTypeValid:!1})},n.handleBuChange=function(e){console.log("bu",e,e.target,e.target.value),""!=e.target.value&&"Please select BU"!=e.target.value?n.setState({bu:e.target.value,BUName:e.target.value.text,buValid:!0,buInvalid:!1}):n.setState({bu:"",BUName:"",buValid:!1,buInvalid:!0})},n.handleEnggChange=function(e){""!=e.target.value&&"Please select Engineer"!=e.target.value?n.setState({engineer:e.target.value,engineerValid:!0,engineerInvalid:!1}):n.setState({engineer:"",engineerValid:!1,engineerInvalid:!0})},n.handleCustomerNameChange=function(e){""!=e.target.value&&null!=e.target.value&&e.target.value.match(/^[a-zA-Z-,]+(\s{0,1}[a-zA-Z-, ])*$/)?n.setState({customerName:e.target.value,customerValid:!0,customerInvalid:!1}):n.setState({customerName:e.target.value,customerValid:!1,customerInvalid:!0})},n.handleCustomerAddChange=function(e){""!=e.target.value?n.setState({customerAdd:e.target.value,customerAddValid:!0,customerAddInvalid:!1}):n.setState({customerAdd:e.target.value,customerAddValid:!1,customerAddInvalid:!0})},n.handleCustomerMobChange=function(e){e.target.value.match(/^\+?([0-9]{2})\)?[-. ]?([0-9]{4})[-. ]?([0-9]{4})$/)?n.setState({customerMob:e.target.value,customerMobValid:!0,customerMobInvalid:!1}):n.setState({customerMob:void 0,customerMobInvalid:!0,customerMobValid:!1})},n.handleEmailChange=function(e){/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,15})+$/.test(e.target.value)?n.setState({customerEmail:e.target.value,customerEmailValid:!0,customerEmailInvalid:!1}):n.setState({customerEmail:e.target.value,customerEmailInvalid:!0,customerEmailValid:!1})},n.handleComplain=function(e){""!=e.target.value&&null!=e.target.value?n.setState({customerRequest:e.target.value,customerRequestInvalid:!1,customerRequestValid:!0}):n.setState({customerRequest:e.target.value,customerRequestInvalid:!0,customerRequestValid:!1})},n.handleValidity=function(e){console.log("Validityyyy",e.target.value,typeof e.target.value),""!=e.target.value&&"Please select validity"!==e.target.value?n.setState({validity:e.target.value,validityValid:!0,validityInvalid:!1}):n.setState({validity:"",validityValid:!1,validityInvalid:!0})},n.handleWarrantyChange=function(e){""!=e.target.value&&"Please select status"!==e.target.value?n.setState({warrantyStatus:e.target.value,warrantyStatusInvalid:!1,warrantyStatusValid:!0}):n.setState({warrantyStatus:"",warrantyStatusInvalid:!0,warrantyStatusValid:!1})},n.handleStatus=function(e){if(""!=e.target.value&&"Please select status"!=e.target.value){var t=0;"Open"==e.target.value?t=1:"In Progress"==e.target.value?t=2:"On hold"==e.target.value?t=3:"Closed"==e.target.value?t=4:"Delayed"==e.target.value&&(t=5),n.setState({sendToBack:t,statusOfTicket:e.target.value,statusOfTicketValid:!0,statusOfTicketInvalid:!1})}else n.setState({statusOfTicket:"",statusOfTicketInvalid:!0,statusOfTicketValid:!1})},n.handlePriority=function(e){""!=e.target.value&&"Please Select Priority"!=e.target.value?n.setState({priority:e.target.value,priorityValid:!0,priorityInvalid:!1}):n.setState({priorityValid:!1,priorityInvalid:!0})},n.handleDueDateChange=function(e){""!==e.target.value?n.setState({dueDate:e.target.value,dueDateInvalid:!1,dueDateValid:!0}):n.setState({dueDateInvalid:!0,dueDateValid:!1})},n.handleSubmit=function(){var e=n.props.alert;if(console.log("state on submit",n.state),null!=n.state.ticketType&&void 0!=n.state.ticketType&&""!=n.state.ticketType&&null!=n.state.bu&&void 0!=n.state.bu&&""!=n.state.bu&&null!=n.state.customerName&&void 0!=n.state.customerName&&""!=n.state.customerName&&null!=n.state.customerAdd&&void 0!=n.state.customerAdd&&""!=n.state.customerAdd&&null!=n.state.customerMob&&void 0!=n.state.customerMob&&""!=n.state.customerMob&&null!=n.state.customerEmail&&void 0!=n.state.customerEmail&&""!=n.state.customerEmail&&null!=n.state.customerRequest&&void 0!=n.state.customerRequest&&""!=n.state.customerRequest&&null!=n.state.validity&&void 0!=n.state.validity&&null!=n.state.warrantyStatus&&void 0!=n.state.warrantyStatus&&null!=n.state.statusOfTicket&&void 0!=n.state.statusOfTicket&&""!=n.state.statusOfTicket&&null!=n.state.dueDate&&void 0!=n.state.dueDate&&""!=n.state.dueDate){console.log("in if condiu;skfnds;knfk;jn");var t={};t.ticketNo=parseInt(n.state.ticketNo),t.ticketType=n.state.ticketType,t.customerComplain=n.state.customerRequest,t.customerEmail=n.state.customerEmail,t.customerName=n.state.customerName,t.customerAddress=n.state.customerAdd,t.customerMNo=n.state.customerMob,t.BUID=n.state.bu,t.isValid=n.state.validity,console.log("vanknjancd",t.isValid),t.inWarranty=n.state.warrantyStatus,t.status=n.state.statusOfTicket,t.dueDate=n.state.dueDate,t.userType="Admin",t.BUName=n.state.BUName,n.dataRequest("/ticket/editTicket",t).then((function(t){void 0!=t.message?e.show(t.message):e.show("Internal Server Error !")})).catch((function(t){e.show("Oops, Something went wrong!")}))}else console.log("ye to else he"),e.show("Please fill all the required fields")},n.handleReset=function(){n.setState({startDate:"",startDateValid:!1,startDateInvalid:!1,ticketType:"",ticketTypeValid:!1,ticketTypeInvalid:!1,bu:"",BUName:"",buValid:!1,buInvalid:!1,engineer:"",engineerValid:!1,engineerInvalid:!1,customerName:"",customerValid:!1,customerInvalid:!1,customerAdd:"",customerAddValid:!1,customerAddInvalid:!1,customerMob:"",customerMobValid:!1,customerMobInvalid:!1,customerEmail:"",customerEmailInvalid:!1,customerEmailValid:!1,customerRequest:"",customerRequestValid:!1,customerRequestInvalid:!1,validity:"",validityValid:!1,validityInvalid:!1,warrantyStatus:"",warrantyStatusValid:!1,warrantyStatusInvalid:!1,statusOfTicket:"",statusOfTicketValid:!1,statusOfTicketInvalid:!1,priority:"",priorityValid:!1,priorityInvalid:!1,dueDate:"",dueDateValid:!1,dueDateInvalid:!1})},n}return Object(n.a)(a,[{key:"componentDidMount",value:function(){this.fetchBu(),this.fetchUser(),this.fetchDropDowns()}},{key:"dataRequest",value:function(e,t){var a=this;return fetch(d.a+e,{method:"POST",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return(401==e.status||403==e.status)&&a.props.history.push("/login"),e.json()})).catch((function(e){return e}))}},{key:"render",value:function(){var e=this,t=this.state.buArr.map((function(e,t){return u.a.createElement("option",{key:e._id,value:e._id},e.BUName)})),a=(this.state.userArr.map((function(e){return u.a.createElement("option",{key:e._id,value:e._id},e.name)})),this.state.ticketTypeArr.map((function(e,t){return u.a.createElement("option",{key:t,value:e},e)}))),l=this.state.ticketStatus.map((function(e,t){return u.a.createElement("option",{key:t,value:e},e)}));return u.a.createElement(u.a.Fragment,null,u.a.createElement(c.j,{style:{height:"78vh"}},u.a.createElement(c.n,null,"Add/Edit Ticket Form"),u.a.createElement(c.k,{style:{overflowY:"scroll"}},u.a.createElement(c.u,{xs:"3"}),u.a.createElement(c.u,{xs:"7"},u.a.createElement(c.J,{action:"",method:"post",encType:"multipart/form-data",className:"form-horizontal"},""!=this.state.ticketNo?u.a.createElement(c.K,{row:!0},u.a.createElement(c.u,{md:"3"},u.a.createElement(c.bb,{htmlFor:"text-input"},"Ticket No:")),u.a.createElement(c.u,{xs:"12",md:"9"},u.a.createElement(c.R,{id:"text-input",name:"text-input",disabled:!0,value:this.state.ticketNo,placeholder:"Text"}),u.a.createElement(c.L,null,"You can not edit this"))):null,u.a.createElement(c.K,{row:!0},u.a.createElement(c.u,{md:"3"},u.a.createElement(c.bb,{htmlFor:"select"},"Type Of Query",u.a.createElement("span",{style:{color:"red"}},"*"))),u.a.createElement(c.u,{xs:"12",md:"9"},u.a.createElement(c.wb,{custom:!0,name:"select",id:"select",value:this.state.ticketType,valid:this.state.ticketTypeValid,invalid:this.state.ticketTypeInvalid,onChange:function(t){return e.handleQueryChange(t)}},u.a.createElement("option",null,"Please select"),a),u.a.createElement(c.Qb,null,"Looks Good!"),u.a.createElement(c.Z,null,"This field is required!"))),u.a.createElement(c.K,{row:!0},u.a.createElement(c.u,{md:"3"},u.a.createElement(c.bb,{htmlFor:"select1"},"Business Unit",u.a.createElement("span",{style:{color:"red"}},"*"))),u.a.createElement(c.u,{xs:"12",md:"9"},u.a.createElement(c.wb,{custom:!0,name:"select1",id:"select1",value:this.state.bu,valid:this.state.buValid,invalid:this.state.buInvalid,onChange:function(t){return e.handleBuChange(t)}},u.a.createElement("option",null,"Please select BU"),t),u.a.createElement(c.Qb,null,"Looks Good!"),u.a.createElement(c.Z,null,"This field is required!"))),u.a.createElement(c.K,{row:!0},u.a.createElement(c.u,{md:"3"},u.a.createElement(c.bb,{htmlFor:"email-input"},"Customer Name",u.a.createElement("span",{style:{color:"red"}},"*"))),u.a.createElement(c.u,{xs:"12",md:"9"},u.a.createElement(c.R,{type:"text",id:"tex1-input",name:"text1-input",placeholder:"Enter Customer Name",autoComplete:"tex1",value:this.state.customerName,valid:this.state.customerValid,invalid:this.state.customerInvalid,onChange:function(t){return e.handleCustomerNameChange(t)}}),u.a.createElement(c.Qb,null,"Looks Good!"),u.a.createElement(c.Z,null,"This field is required!"))),u.a.createElement(c.K,{row:!0},u.a.createElement(c.u,{md:"3"},u.a.createElement(c.bb,{htmlFor:"textarea-input"},"Customer Address",u.a.createElement("span",{style:{color:"red"}},"*"))),u.a.createElement(c.u,{xs:"12",md:"9"},u.a.createElement(c.Jb,{name:"textarea-input",id:"textarea-input",rows:"9",placeholder:"Enter Customer's Address...",value:this.state.customerAdd,valid:this.state.customerAddValid,invalid:this.state.customerAddInvalid,onChange:function(t){return e.handleCustomerAddChange(t)}}),u.a.createElement(c.Qb,null,"Looks Good!"),u.a.createElement(c.Z,null,"This field is required!"))),u.a.createElement(c.K,{row:!0},u.a.createElement(c.u,{md:"3"},u.a.createElement(c.bb,{htmlFor:"text-input"},"Customer Mob. No",u.a.createElement("span",{style:{color:"red"}},"*"))),u.a.createElement(c.u,{xs:"12",md:"9"},u.a.createElement(c.R,{type:"number",id:"text-input",name:"text-input",placeholder:"Enter Mobile No",autoComplete:"new-text",value:this.state.customerMob,valid:this.state.customerMobValid,invalid:this.state.customerMobInvalid,onChange:function(t){return e.handleCustomerMobChange(t)}}),u.a.createElement(c.Qb,null,"Looks Good!"),u.a.createElement(c.Z,null,"Please Enter Valid Number"))),u.a.createElement(c.K,{row:!0},u.a.createElement(c.u,{md:"3"},u.a.createElement(c.bb,{htmlFor:"email-input"},"Customer EmailID",u.a.createElement("span",{style:{color:"red"}},"*"))),u.a.createElement(c.u,{xs:"12",md:"9"},u.a.createElement(c.R,{type:"text",id:"email-input",name:"email-input",placeholder:"Enter Email Address",autoComplete:"email",value:this.state.customerEmail,valid:this.state.customerEmailValid,invalid:this.state.customerEmailInvalid,onChange:function(t){return e.handleEmailChange(t)}}),u.a.createElement(c.Qb,null,"Looks Good!"),u.a.createElement(c.Z,null,"Please Enter Valid Email"))),u.a.createElement(c.K,{row:!0},u.a.createElement(c.u,{md:"3"},u.a.createElement(c.bb,{htmlFor:"textarea-input"},"Customer Complain",u.a.createElement("span",{style:{color:"red"}},"*"))),u.a.createElement(c.u,{xs:"12",md:"9"},u.a.createElement(c.Jb,{name:"textarea-input",id:"textarea-input",rows:"9",placeholder:"Content...",value:this.state.customerRequest,valid:this.state.customerRequestValid,invalid:this.state.customerRequestInvalid,onChange:function(t){return e.handleComplain(t)}}),u.a.createElement(c.Qb,null,"Looks Good!"),u.a.createElement(c.Z,null,"This field is required!"))),u.a.createElement(c.K,{row:!0},u.a.createElement(c.u,{md:"3"},u.a.createElement(c.bb,{htmlFor:"select"},"Validity",u.a.createElement("span",{style:{color:"red"}},"*"))),u.a.createElement(c.u,{xs:"12",md:"9"},u.a.createElement(c.wb,{custom:!0,name:"select",id:"select",value:this.state.validity,valid:this.state.validityValid,invalid:this.state.validityInvalid,onChange:this.handleValidity},u.a.createElement("option",null,"Please select validity"),u.a.createElement("option",{value:!0},"Valid"),u.a.createElement("option",{value:!1},"Invalid")),u.a.createElement(c.Qb,null,"Looks Good!"),u.a.createElement(c.Z,null,"This field is required!"))),u.a.createElement(c.K,{row:!0},u.a.createElement(c.u,{md:"3"},u.a.createElement(c.bb,{htmlFor:"select"},"Warranty Status",u.a.createElement("span",{style:{color:"red"}},"*"))),u.a.createElement(c.u,{xs:"12",md:"9"},u.a.createElement(c.wb,{custom:!0,name:"select",id:"select",value:this.state.warrantyStatus,valid:this.state.warrantyStatusValid,invalid:this.state.warrantyStatusInvalid,onChange:function(t){return e.handleWarrantyChange(t)}},u.a.createElement("option",null,"Please select status"),u.a.createElement("option",{value:!0},"In Warranty"),u.a.createElement("option",{value:!1},"Out Of Warranty")),u.a.createElement(c.Qb,null,"Looks Good!"),u.a.createElement(c.Z,null,"This field is required!"))),u.a.createElement(c.K,{row:!0},u.a.createElement(c.u,{md:"3"},u.a.createElement(c.bb,{htmlFor:"select"},"Status Of Ticket",u.a.createElement("span",{style:{color:"red"}},"*"))),u.a.createElement(c.u,{xs:"12",md:"9"},u.a.createElement(c.wb,{custom:!0,name:"select",id:"select",value:this.state.statusOfTicket,valid:this.state.statusOfTicketValid,invalid:this.state.statusOfTicketInvalid,onChange:function(t){return e.handleStatus(t)}},u.a.createElement("option",null,""!=this.state.statusOfTicket?this.state.statusOfTicket:"Please select status"),l),u.a.createElement(c.Qb,null,"Looks Good!"),u.a.createElement(c.Z,null,"This field is required!"))),u.a.createElement(c.K,{row:!0},u.a.createElement(c.u,{md:"3"},u.a.createElement(c.bb,{htmlFor:"date-input"},"Due Date",u.a.createElement("span",{style:{color:"red"}},"*"))),u.a.createElement(c.u,{xs:"12",md:"9"},u.a.createElement(c.R,{type:"date",id:"date-input",name:"date-input",placeholder:"date",value:this.state.dueDate,valid:this.state.dueDateValid,invalid:this.state.dueDateInvalid,onChange:function(t){return e.handleDueDateChange(t)},min:E}),u.a.createElement(c.Qb,null,"Looks Good!"),u.a.createElement(c.Z,null,"This field is required!")))))),u.a.createElement(c.l,null,u.a.createElement(c.f,{type:"submit",size:"sm",color:"primary",style:{margin:"3px"},onClick:this.handleSubmit},"Submit"),u.a.createElement(c.f,{type:"reset",size:"sm",color:"danger",style:{margin:"3px"},onClick:this.handleReset},"Reset"),u.a.createElement(h.b,{to:"/ticketTable"},u.a.createElement(c.f,{size:"sm",color:"dark",style:{margin:"3px"}},"Back")))))}}]),a}(u.a.Component);t.default=Object(p.c)()(b)}}]);
//# sourceMappingURL=36.2013a489.chunk.js.map