(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[37],{699:function(e,t,a){"use strict";t.a=""},879:function(e,t,a){"use strict";a.r(t);var n=a(184),i=a(185),r=a(187),o=a(186),s=a(0),l=a.n(s),c=a(694),u=(a(695),a(699)),d=a(711),m=a.n(d),p=a(131),h=a(183),v=function(e){Object(r.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={ticketNo:void 0==e.props.location.res?"":e.props.location.res.ticketNo,BUID:void 0==e.props.location.res?"":e.props.location.res.BUID,statusOfTicket:void 0==e.props.location.ticketStatusExport?"":e.props.location.ticketStatusExport,statusInvalid:!1,statusValid:!1,sendToBack:0,ticketStatus:[],priority:void 0==e.props.location.res?"":e.props.location.res.priority,priorityInvalid:!1,priorityValid:!1,sendBackPri:0,ticketPriority:[],engineer:void 0==e.props.location.res?"":e.props.location.res.teamRepresentative,tmValid:!1,tmInvalid:!1,dueDate:void 0==e.props.location.res?"":m()(e.props.location.res.dueDate).format("YYYY-MM-DD"),validDueDate:!1,invalidDueDate:!1,userArr:[]},e.fetchUser=function(){var t=e.state.BUID;fetch(u.a+"/user/fetch?BUID="+t+"&utype=Team Representative").then((function(e){return e.json()})).then((function(t){void 0!=t.data&&t.data&&e.setState({userArr:t.data})})).catch((function(e){}))},e.handleEnggChange=function(t){console.log("Engineer ",t.target.value),""!=t.target.value&&"Please Select Engineer"!=t.target.value?e.setState({engineer:t.target.value,tmValid:!0,tmInvalid:!1}):e.setState({engineer:"",tmValid:!1,tmInvalid:!0})},e.handleSubmit=function(){var t=e.props.alert;if(console.log("state on submit",e.state),null!=e.state.ticketNo&&void 0!=e.state.ticketNo&&""!=e.state.ticketNo&&null!=e.state.engineer&&void 0!=e.state.engineer&&""!=e.state.engineer){var a={};a.ticketNo=e.state.ticketNo,a.status=e.state.statusOfTicket,a.priority=e.state.priority,a.teamRepresentative=e.state.engineer,a.dueDate=e.state.dueDate,a.userType="BU Representative",e.dataRequest("/ticket/editTicket",a).then((function(e){void 0!=e.message?t.show(e.message):t.show("Internal Server Error !")})).catch((function(e){console.log("inside TRForm",e)}))}else t.show("Please fill all the required fields")},e.handleReset=function(){e.setState({statusOfTicket:"",statusInvalid:!1,statusValid:!1,priority:"",priorityInvalid:!1,priorityValid:!1,engineer:"",tmValid:!1,tmInvalid:!1,dueDate:"",validDueDate:!1,invalidDueDate:!1})},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.fetchUser()}},{key:"dataRequest",value:function(e,t){var a=this;return fetch(u.a+e,{method:"POST",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return(401==e.status||403==e.status)&&a.props.history.push("/login"),e.json()})).catch((function(e){return e}))}},{key:"render",value:function(){var e=this,t=this.state.userArr.map((function(e){return l.a.createElement("option",{key:e._id,value:e._id},e.name)}));this.state.ticketStatus.map((function(e,t){return l.a.createElement("option",{key:t,value:e},e)})),this.state.ticketPriority.map((function(e,t){return l.a.createElement("option",{key:t,value:e},e)}));return l.a.createElement(l.a.Fragment,null,l.a.createElement(c.j,null,l.a.createElement(c.n,null,"Edit Ticket Form"),l.a.createElement(c.k,null,l.a.createElement(c.u,{xs:"3"}),l.a.createElement(c.u,{xs:"7"},l.a.createElement(c.J,{action:"",method:"post",encType:"multipart/form-data",className:"form-horizontal"},l.a.createElement(c.K,{row:!0},l.a.createElement(c.u,{md:"3"},l.a.createElement(c.bb,{htmlFor:"text-input"},"Ticket No:")),l.a.createElement(c.u,{xs:"12",md:"9"},l.a.createElement(c.R,{id:"text-input",name:"text-input",disabled:!0,value:this.state.ticketNo,placeholder:"Text"}),l.a.createElement(c.L,null,"You can not edit this"))),l.a.createElement(c.K,{row:!0},l.a.createElement(c.u,{md:"3"},l.a.createElement(c.bb,{htmlFor:"select"},"Concerned Team Representative",l.a.createElement("span",{style:{color:"red"}},"*"))),l.a.createElement(c.u,{xs:"12",md:"9"},l.a.createElement(c.wb,{custom:!0,name:"select",id:"select",value:this.state.engineer,valid:this.state.tmValid,invalid:this.state.tmInvalid,onChange:function(t){return e.handleEnggChange(t)}},l.a.createElement("option",null,"Please Select Engineer"),t),l.a.createElement(c.Qb,null,"Looks Good!"),l.a.createElement(c.Z,null,"This field is required!")))))),l.a.createElement(c.l,null,l.a.createElement(c.f,{type:"submit",size:"sm",color:"primary",style:{margin:"3px"},onClick:this.handleSubmit},"Submit"),l.a.createElement(c.f,{type:"reset",size:"sm",color:"danger",style:{margin:"3px"},onClick:this.handleReset},"Reset"),l.a.createElement(h.b,{to:"/ticketTable"},l.a.createElement(c.f,{size:"sm",color:"dark",style:{margin:"3px"}},"Back")))))}}]),a}(l.a.Component);t.default=Object(p.c)()(v)}}]);
//# sourceMappingURL=37.57c5a112.chunk.js.map