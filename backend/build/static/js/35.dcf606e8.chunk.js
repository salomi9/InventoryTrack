(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[35],{699:function(e,t,a){"use strict";t.a=""},874:function(e,t,a){"use strict";a.r(t);var n=a(184),i=a(185),r=a(187),s=a(186),l=a(0),o=a.n(l),c=a(694),u=(a(695),a(699)),d=a(711),m=a.n(d),p=a(131),h=a(183),v=(new Date).toISOString().substr(0,10),f=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={ticketNo:void 0==e.props.location.res?"":e.props.location.res.ticketNo,BUID:void 0==e.props.location.res?"":e.props.location.res.BUID,statusOfTicket:void 0==e.props.location.ticketStatusExport?"":e.props.location.ticketStatusExport,statusInvalid:!1,statusValid:!1,sendToBack:0,ticketStatus:[],priority:void 0==e.props.location.res?"":e.props.location.res.priority,priorityInvalid:!1,priorityValid:!1,sendBackPri:0,ticketPriority:[],assignedMember:void 0==e.props.location.res?"":e.props.location.res.assignedMember,tmValid:!1,tmInvalid:!1,dueDate:void 0==e.props.location.res?"":m()(e.props.location.res.dueDate).format("YYYY-MM-DD"),validDueDate:!1,invalidDueDate:!1,userArr:[]},e.fetchUser=function(){var t=e.state.BUID;fetch(u.a+"/user/fetch?BUID="+t+"&utype=Team Member").then((function(e){return e.json()})).then((function(t){void 0!=t.data&&t.data&&e.setState({userArr:t.data})})).catch((function(e){}))},e.fetchDropDowns=function(){fetch(u.a+"/types/ts").then((function(e){return e.json()})).then((function(t){null==t&&void 0==t||!Array.isArray(t.data)||e.setState({ticketStatus:t.data})})).catch((function(e){return e})),fetch(u.a+"/types/tp").then((function(e){return e.json()})).then((function(t){null==t&&void 0==t||!Array.isArray(t.data)||e.setState({ticketPriority:t.data})})).catch((function(e){return e}))},e.handleStatus=function(t){if(""!=t.target.value&&"Please select status"!=t.target.value){var a=0;"Open"==t.target.value?a=1:"In Progress"==t.target.value?a=2:"On hold"==t.target.value?a=3:"Closed"==t.target.value?a=4:"Delayed"==t.target.value&&(a=5),e.setState({sendToBack:a,statusOfTicket:t.target.value,statusValid:!0,statusInvalid:!1})}else e.setState({statusOfTicket:"",statusInvalid:!0,statusValid:!1})},e.handlePriority=function(t){if(""!=t.target.value&&"Please Select Priority"!=t.target.value){var a=0;"High"==t.target.value?a=1:"Medium"==t.target.value?a=2:"Low"==t.target.value&&(a=3),e.setState({sendBackPri:a,priority:t.target.value,priorityValid:!0,priorityInvalid:!1})}else e.setState({priorityValid:!1,priorityInvalid:!0})},e.handleEnggChange=function(t){""!=t.target.value&&"Please Select Engineer"!=t.target.value?e.setState({assignedMember:t.target.value,tmValid:!0,tmInvalid:!1}):e.setState({engineer:"",assignedMember:"",tmValid:!1,tmInvalid:!0})},e.handleDueDateChange=function(t){""!=t.target.value?e.setState({dueDate:t.target.value,invalidDueDate:!1,validDueDate:!0}):e.setState({invalidDueDate:!0,validDueDate:!1})},e.handleSubmit=function(){var t=e.props.alert;if(console.log("state on submit",e.state),null!=e.state.statusOfTicket&&void 0!=e.state.statusOfTicket&&""!=e.state.statusOfTicket&&null!=e.state.priority&&void 0!=e.state.priority&&""!=e.state.priority&&null!=e.state.assignedMember&&void 0!=e.state.assignedMember&&""!=e.state.assignedMember&&null!=e.state.dueDate&&void 0!=e.state.dueDate&&""!=e.state.dueDate){var a={};a.ticketNo=e.state.ticketNo,a.status=e.state.statusOfTicket,a.priority=e.state.priority,a.engineer=e.state.engineer,a.dueDate=e.state.dueDate,a.userType="Team Representative",a.assignedMember=e.state.assignedMember,e.dataRequest("/ticket/editTicket",a).then((function(e){void 0!=e.message?t.show(e.message):t.show("Internal Server Error !")})).catch((function(e){console.log("inside TRForm",e)}))}else t.show("Please fill all the required fields")},e.handleReset=function(){e.setState({statusOfTicket:"",statusInvalid:!1,statusValid:!1,priority:"",priorityInvalid:!1,priorityValid:!1,engineer:"",assignedMember:"",tmValid:!1,tmInvalid:!1,dueDate:"",validDueDate:!1,invalidDueDate:!1})},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.fetchUser(),this.fetchDropDowns()}},{key:"dataRequest",value:function(e,t){var a=this;return fetch(u.a+e,{method:"POST",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return(401==e.status||403==e.status)&&a.props.history.push("/login"),e.json()})).catch((function(e){return e}))}},{key:"render",value:function(){var e=this,t=this.state.userArr.map((function(e){return o.a.createElement("option",{key:e._id,value:e._id},e.name)})),a=this.state.ticketStatus.map((function(e,t){return o.a.createElement("option",{key:t,value:e},e)})),n=this.state.ticketPriority.map((function(e,t){return o.a.createElement("option",{key:t,value:e},e)}));return o.a.createElement(o.a.Fragment,null,o.a.createElement(c.j,null,o.a.createElement(c.n,null,"Edit Ticket Form"),o.a.createElement(c.k,null,o.a.createElement(c.u,{xs:"3"}),o.a.createElement(c.u,{xs:"7"},o.a.createElement(c.J,{action:"",method:"post",encType:"multipart/form-data",className:"form-horizontal"},o.a.createElement(c.K,{row:!0},o.a.createElement(c.u,{md:"3"},o.a.createElement(c.bb,{htmlFor:"text-input"},"Ticket No:")),o.a.createElement(c.u,{xs:"12",md:"9"},o.a.createElement(c.R,{id:"text-input",name:"text-input",disabled:!0,value:this.state.ticketNo,placeholder:"Text"}),o.a.createElement(c.L,null,"You can not edit this"))),o.a.createElement(c.K,{row:!0},o.a.createElement(c.u,{md:"3"},o.a.createElement(c.bb,{htmlFor:"select"},"Status Of Ticket",o.a.createElement("span",{style:{color:"red"}},"*"))),o.a.createElement(c.u,{xs:"12",md:"9"},o.a.createElement(c.wb,{valid:this.state.statusValid,invalid:this.state.statusInvalid,custom:!0,name:"select",id:"select",value:this.state.statusOfTicket,onChange:function(t){return e.handleStatus(t)}},o.a.createElement("option",null,""!=this.state.statusOfTicket?this.state.statusOfTicket:"Please select status"),a),o.a.createElement(c.Qb,null,"Looks Good!"),o.a.createElement(c.Z,null,"This field is required!"))),o.a.createElement(c.K,{row:!0},o.a.createElement(c.u,{md:"3"},o.a.createElement(c.bb,{htmlFor:"select"},"Priority",o.a.createElement("span",{style:{color:"red"}},"*"))),o.a.createElement(c.u,{xs:"12",md:"9"},o.a.createElement(c.wb,{valid:this.state.priorityValid,invalid:this.state.priorityInvalid,custom:!0,name:"select",id:"select",value:this.state.priority,onChange:function(t){return e.handlePriority(t)}},o.a.createElement("option",null,"Please Select Priority"),n),o.a.createElement(c.Qb,null,"Looks Good!"),o.a.createElement(c.Z,null,"This field is required!"))),o.a.createElement(c.K,{row:!0},o.a.createElement(c.u,{md:"3"},o.a.createElement(c.bb,{htmlFor:"select"},"Concerned Team Member",o.a.createElement("span",{style:{color:"red"}},"*"))),o.a.createElement(c.u,{xs:"12",md:"9"},o.a.createElement(c.wb,{custom:!0,name:"select",id:"select",value:this.state.assignedMember,valid:this.state.tmValid,invalid:this.state.tmInvalid,onChange:function(t){return e.handleEnggChange(t)}},o.a.createElement("option",null,"Please Select Engineer"),t),o.a.createElement(c.Qb,null,"Looks Good!"),o.a.createElement(c.Z,null,"This field is required!"))),o.a.createElement(c.K,{row:!0},o.a.createElement(c.u,{md:"3"},o.a.createElement(c.bb,{htmlFor:"date-input"},"Due Date",o.a.createElement("span",{style:{color:"red"}},"*"))),o.a.createElement(c.u,{xs:"12",md:"9"},o.a.createElement(c.R,{type:"date",id:"date-input",name:"date-input",placeholder:"date",value:this.state.dueDate,valid:this.state.validDueDate,invalid:this.state.invalidDueDate,onChange:function(t){return e.handleDueDateChange(t)},min:v}),o.a.createElement(c.Qb,null,"Looks Good!"),o.a.createElement(c.Z,null,"This field is required!")))))),o.a.createElement(c.l,null,o.a.createElement(c.f,{type:"submit",size:"sm",color:"primary",style:{margin:"3px"},onClick:this.handleSubmit},"Submit"),o.a.createElement(c.f,{type:"reset",size:"sm",color:"danger",style:{margin:"3px"},onClick:this.handleReset},"Reset"),o.a.createElement(h.b,{to:"/ticketTable"},o.a.createElement(c.f,{size:"sm",color:"dark",style:{margin:"3px"}},"Back")))))}}]),a}(o.a.Component);t.default=Object(p.c)()(f)}}]);
//# sourceMappingURL=35.dcf606e8.chunk.js.map